<div *ngIf="loading" class="text-gray-600 text-sm">Loading test...</div>

<div *ngIf="!loading && questions.length > 0">
  <h2 class="text-lg font-bold mb-2">{{ testTitle }}</h2>

  <p class="mb-3 font-medium">Q{{ currentQuestionIndex + 1 }}: 
    {{ questions[currentQuestionIndex]?.questionTitle }}</p>

  <div *ngFor="let opt of questions[currentQuestionIndex].answerOptions">
    <label class="flex items-center space-x-2 mb-2">
      <input 
        type="radio"
        name="question{{ currentQuestionIndex }}"
        [value]="opt.id"
        (change)="selectAnswer(questions[currentQuestionIndex].questionId, opt.id)"
      />
      <span>{{ opt.text }}</span>
    </label>
  </div>

  <div class="flex justify-between mt-4">
    <button 
      (click)="prevQuestion()" 
      [disabled]="currentQuestionIndex === 0"
      class="text-sm text-gray-600 hover:underline"
    >
      ⬅ Prev
    </button>

    <button 
      (click)="nextQuestion()" 
      [disabled]="currentQuestionIndex === questions.length - 1"
      class="text-sm text-gray-600 hover:underline"
    >
      Next ➡
    </button>
  </div>

  <button 
    (click)="submit()" 
    class="bg-green-600 text-white font-semibold px-4 py-2 rounded mt-4"
  >
    Submit Test
  </button>

  <div *ngIf="message" class="mt-2 text-green-600 text-sm">{{ message }}</div>
</div>

<div *ngIf="!loading && questions.length === 0 && !message">
  <p class="text-sm text-gray-600">No questions found for this test.</p>
</div>
